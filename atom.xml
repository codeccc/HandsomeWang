<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>樱花洛</title>
  <subtitle>too young,too simple...</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://codewang.site/"/>
  <updated>2017-08-04T10:11:22.512Z</updated>
  <id>http://codewang.site/</id>
  
  <author>
    <name>樱花洛</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title></title>
    <link href="http://codewang.site/%E5%AE%9E%E7%8E%B0Android%20%E5%BD%A9%E8%89%B2%E6%B8%90%E5%8F%98%E7%8A%B6%E6%80%81%E6%A0%8F.html"/>
    <id>http://codewang.site/实现Android 彩色渐变状态栏.html</id>
    <published>2017-08-04T10:09:35.763Z</published>
    <updated>2017-08-04T10:11:22.512Z</updated>
    
    <content type="html"><![CDATA[<pre><code>                                   ###                     实现Android 彩色渐变状态栏
</code></pre><hr>
<p>title: 实现Android 彩色渐变状态栏<br>date: 2017-08-04 18:10:22<br>tags: [android,状态栏]<br>categories: android </p>
<h2 id="top-101"><a href="#top-101" class="headerlink" title="top: 101"></a>top: 101</h2><p>​        一般应用的开发都是纯色状态栏或者透明状态栏,一般开发者也很少或者基本不接触渐变色状态栏这个东西,但如果项目需求需要做渐变色状态栏,这种需求该如何处理了.接下来我将以我的实现效果为例,讲解这种效果对应的解决办法。话不多说,先来看一眼效果图吧:</p>
<p><img src="http://osk74z31x.bkt.clouddn.com/model_plan_add.png-codeccc" alt="image"></p>
<p>效果显示很不错的,接下来正式进入我们的教程。</p>
<p>1.首先在<code>colors.xml</code>中定义好使用的颜色<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&lt;color name="theme_color_one"&gt;#f8b195&lt;/color&gt;</div><div class="line">&lt;color name="theme_color_two"&gt;#f291b0&lt;/color&gt;</div></pre></td></tr></table></figure></p>
<p>2.在<code>drawable</code>文件加下创建<code>statusbar_theme_shape.xml</code>文件,并添加如下代码:<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</div><div class="line">&lt;shape xmlns:android="http://schemas.android.com/apk/res/android"&gt;</div><div class="line"></div><div class="line">    &lt;corners android:radius="2dp"/&gt;</div><div class="line">    &lt;gradient</div><div class="line">        android:angle="0"</div><div class="line">        android:endColor="@color/theme_color_two"</div><div class="line">        android:startColor="@color/theme_color_one"/&gt;</div><div class="line"></div><div class="line">&lt;/shape&gt;</div></pre></td></tr></table></figure></p>
<p>3.在<code>layout</code>中创建<code>activity_base.xml</code>文件,添加如下代码:<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">&lt;LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"</div><div class="line">              android:id="@+id/root_view"</div><div class="line">              android:layout_width="match_parent"</div><div class="line">              android:layout_height="match_parent"</div><div class="line">              android:orientation="vertical"&gt;</div><div class="line"></div><div class="line">    &lt;View</div><div class="line">        android:id="@+id/statusBarBg"</div><div class="line">        android:layout_width="match_parent"</div><div class="line">        android:layout_height="wrap_content"</div><div class="line">        android:background="@drawable/btn_theme_shape"/&gt;</div><div class="line">    &lt;FrameLayout</div><div class="line">        android:id="@+id/content_view"</div><div class="line">        android:layout_width="match_parent"</div><div class="line">        android:layout_height="match_parent"</div><div class="line">        android:fillViewport="true"&gt;</div><div class="line">    &lt;/FrameLayout&gt;</div><div class="line">&lt;/LinearLayout&gt;</div></pre></td></tr></table></figure></p>
<p>3.创建<code>BaseActivity.class</code>类,添加如下代码:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div></pre></td><td class="code"><pre><div class="line">	<span class="comment">//得到布局id</span></div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">abstract</span> <span class="keyword">int</span> <span class="title">getLayoutId</span><span class="params">()</span></span>;</div><div class="line">    </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(@Nullable Bundle savedInstanceState)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</div><div class="line">        <span class="keyword">if</span> (!isCustomStatusBar()) &#123;</div><div class="line">            initWindowParameter();</div><div class="line">        &#125;</div><div class="line">        <span class="comment">//设置视图</span></div><div class="line">        setContentView(R.layout.activity_base);</div><div class="line">        initContentView();</div><div class="line">    &#125;</div><div class="line">    <span class="comment">/**</span></div><div class="line">     *初始化内容视图</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">initContentView</span><span class="params">()</span> </span>&#123;</div><div class="line">      	<span class="comment">//得到内容视图</span></div><div class="line">        mContentView = (ViewGroup) findViewById(R.id.content_view);</div><div class="line">      	<span class="comment">//得到状态栏视图</span></div><div class="line">        mStatusView = findViewById(R.id.statusBarBg);</div><div class="line">        <span class="keyword">if</span> (mLayoutView == <span class="keyword">null</span>) &#123;</div><div class="line">            <span class="keyword">int</span> layoutId = getLayoutId();</div><div class="line">            <span class="keyword">if</span> (layoutId != <span class="number">0</span>) &#123;</div><div class="line">                mBinding = DataBindingUtil.inflate(getLayoutInflater(), layoutId, mContentView, <span class="keyword">false</span>);</div><div class="line">            &#125;</div><div class="line">            <span class="comment">//得到继承自BaseActivity的Activity的根视图</span></div><div class="line">            mLayoutView = mBinding.getRoot();</div><div class="line">        &#125;</div><div class="line">        <span class="comment">//清除所有视图</span></div><div class="line">        mContentView.removeAllViews();</div><div class="line">        <span class="comment">//将子类的根视图添加到内容视图中</span></div><div class="line">        mContentView.addView(mLayoutView);</div><div class="line">        <span class="comment">//设置状态栏样式</span></div><div class="line">        setStatusBarColor();</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="comment">/**</span></div><div class="line">     * 设置状态栏颜色</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setStatusBarColor</span><span class="params">()</span> </span>&#123;</div><div class="line">      	<span class="comment">//从Android4.4开始加入对状态栏样式的更改</span></div><div class="line">        <span class="keyword">if</span> (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.KITKAT) &#123;</div><div class="line">          	<span class="comment">//得到状态栏高度并设置状态栏参数</span></div><div class="line">            LinearLayout.LayoutParams lParams = <span class="keyword">new</span> LinearLayout.LayoutParams(LinearLayout</div><div class="line">                    .LayoutParams.MATCH_PARENT, ScreenUtils.getStatusHeight(<span class="keyword">this</span>));</div><div class="line">            mStatusView.setBackgroundResource(R.drawable.btn_theme_shape);</div><div class="line">            mStatusView.setLayoutParams(lParams);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="comment">/**</span></div><div class="line">     * 设置状态栏等与Window相关的参数</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">initWindowParameter</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP) &#123;<span class="comment">//5.0+</span></div><div class="line">            View decorView = getWindow().getDecorView();</div><div class="line">            <span class="keyword">int</span> option = View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN</div><div class="line">                    | View.SYSTEM_UI_FLAG_LAYOUT_STABLE;</div><div class="line"><span class="comment">//            if (mIsLight) &#123; //如果StatusBar为亮色主题的话，则文字颜色为深色</span></div><div class="line"><span class="comment">//                option = option | View.SYSTEM_UI_FLAG_LIGHT_STATUS_BAR;</span></div><div class="line"><span class="comment">//            &#125;</span></div><div class="line">            decorView.setSystemUiVisibility(option);</div><div class="line">            <span class="comment">//设置透明状态栏</span></div><div class="line">            getWindow().setStatusBarColor(Color.TRANSPARENT);</div><div class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.KITKAT) &#123;<span class="comment">//4.4~5.0</span></div><div class="line">            WindowManager.LayoutParams localLayoutParams = getWindow().getAttributes();</div><div class="line">            <span class="comment">//设置透明状态栏</span></div><div class="line">            localLayoutParams.flags = (WindowManager.LayoutParams.FLAG_TRANSLUCENT_STATUS |</div><div class="line">                    localLayoutParams.flags);</div><div class="line">        &#125;</div><div class="line">        <span class="comment">//设置Activity与软键盘的交互方式</span></div><div class="line">        getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_ADJUST_PAN);</div><div class="line">    &#125;</div></pre></td></tr></table></figure></p>
<p>5.所有需要实现渐变状态栏的<code>Activity</code>继承自<code>BaseActivity</code>便可实现这种渐变色状态栏的效果</p>
]]></content>
    
    <summary type="html">
    
      &lt;pre&gt;&lt;code&gt;                                   ###                     实现Android 彩色渐变状态栏
&lt;/code&gt;&lt;/pre&gt;&lt;hr&gt;
&lt;p&gt;title: 实现Android 彩色渐变状态栏&lt;br&gt;dat
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Android基于X5内核 WebView项目套壳优化</title>
    <link href="http://codewang.site/Android%E5%9F%BA%E4%BA%8EX5%E5%86%85%E6%A0%B8%20WebView%E9%A1%B9%E7%9B%AE%E5%A5%97%E5%A3%B3%E4%BC%98%E5%8C%96.html"/>
    <id>http://codewang.site/Android基于X5内核 WebView项目套壳优化.html</id>
    <published>2017-07-31T07:25:44.000Z</published>
    <updated>2017-07-31T07:25:34.519Z</updated>
    
    <content type="html"><![CDATA[<h5 id="一、webview加载缓慢-如何提高加载使用效率"><a href="#一、webview加载缓慢-如何提高加载使用效率" class="headerlink" title="一、webview加载缓慢,如何提高加载使用效率?"></a>一、webview加载缓慢,如何提高加载使用效率?</h5><ol>
<li><p>设置渲染等级为高</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">settings.setRenderPriority(WebSettings.RenderPriority.HIGH);</div></pre></td></tr></table></figure>
</li>
<li><p>在java代码中动态创建webview</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">WebView webView = <span class="keyword">new</span> WebView(getApplicationContext(), <span class="keyword">null</span>);</div><div class="line">webView.setLayoutParams(<span class="keyword">new</span> ViewGroup.LayoutParams(FrameLayout.LayoutParams.MATCH_PARENT, FrameLayout.LayoutParams.MATCH_PARENT));</div><div class="line">mBinding.mainView.addView(webView, <span class="number">0</span>);</div></pre></td></tr></table></figure>
</li>
</ol>
<h5 id="二、Webview缓存使用策略"><a href="#二、Webview缓存使用策略" class="headerlink" title="二、Webview缓存使用策略"></a>二、Webview缓存使用策略</h5><p>webview的五种缓存策略模式:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> LOAD_DEFAULT = -<span class="number">1</span>;<span class="comment">//默认模式</span></div><div class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> LOAD_NORMAL = <span class="number">0</span>;<span class="comment">//普通模式</span></div><div class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> LOAD_CACHE_ELSE_NETWORK = <span class="number">1</span>;<span class="comment">//如果有缓存,优先加载缓存,否则从网络获取数据</span></div><div class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> LOAD_NO_CACHE = <span class="number">2</span>;<span class="comment">//不加载缓存,只从网络获取数据</span></div><div class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> LOAD_CACHE_ONLY = <span class="number">3</span>;<span class="comment">//只加载缓存</span></div></pre></td></tr></table></figure></p>
<p>如果加载的是静态页面,网页数据样式固定,则推荐使用<code>LOAD_CACHE_ELSE_NETWORK</code>模式;</p>
<p>如果加载的数据是从服务器动态获取的,比如帖子论坛页面,个人信息页面,则推荐使用<code>LOAD_NO_CACHE</code>,以保证每次都能获取最新内容</p>
<p>如果加载的网页是app端内置于<code>assets</code>目录写死的网页,则可以使用<code>LOAD_CACHE_ONLY</code>模式;</p>
<h5 id="三、关于webview页面输入法弹窗遮挡输入框的问题解决方案"><a href="#三、关于webview页面输入法弹窗遮挡输入框的问题解决方案" class="headerlink" title="三、关于webview页面输入法弹窗遮挡输入框的问题解决方案"></a>三、关于webview页面输入法弹窗遮挡输入框的问题解决方案</h5><p>在<code>Activity</code>的<code>OnCrate()</code>方法中加入如下代码:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">this</span>.getWindow().setSoftInputMode(</div><div class="line">                WindowManager.LayoutParams.SOFT_INPUT_ADJUST_RESIZE |</div><div class="line">                        WindowManager.LayoutParams.SOFT_INPUT_STATE_HIDDEN</div><div class="line">        );</div></pre></td></tr></table></figure></p>
<p>,此段代码含义是输入法高度状态自适应,如果有输入法弹出,则重新调整页面布局使输入框处于输入法上面</p>
<h5 id="四、webview网页加载速度提升"><a href="#四、webview网页加载速度提升" class="headerlink" title="四、webview网页加载速度提升"></a>四、webview网页加载速度提升</h5><p>在开始加载前设置<code>settings.setBlockNetworkImage(true);</code>先屏蔽掉加载网页,然后在<br>设置webview的<code>setWebViewClient()</code>方法里<code>new</code>出新的<code>WebViewClient()</code>时,在重写的方法<code>onPageFinished()</code>中再设置<code>mWebSettings.setBlockNetworkImage(false);</code>取消图片加载屏蔽限制</p>
<h5 id="五、WebView避免内存泄漏"><a href="#五、WebView避免内存泄漏" class="headerlink" title="五、WebView避免内存泄漏"></a>五、WebView避免内存泄漏</h5><ul>
<li>不在xml中定义 Webview ，而是在需要的时候在Activity中创建，并且Context使用 getApplicationgContext()</li>
<li>在 Activity 销毁（ WebView ）的时候，先让 WebView 加载null内容，然后移除 WebView，再销毁 WebView，最后置空。<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Override</span></div><div class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onDestroy</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span> (mWebView != <span class="keyword">null</span>) &#123;</div><div class="line">        mWebView.loadDataWithBaseURL(<span class="keyword">null</span>, <span class="string">""</span>, <span class="string">"text/html"</span>, <span class="string">"utf-8"</span>, <span class="keyword">null</span>);</div><div class="line">        mWebView.clearHistory();</div><div class="line"></div><div class="line">        ((ViewGroup) mWebView.getParent()).removeView(mWebView);</div><div class="line">        mWebView.destroy();</div><div class="line">        mWebView = <span class="keyword">null</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">super</span>.onDestroy();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<h5 id="六、Webview的Cookie处理"><a href="#六、Webview的Cookie处理" class="headerlink" title="六、Webview的Cookie处理"></a>六、<code>Webview</code>的<code>Cookie</code>处理</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * 设置浏览器的cookies</div><div class="line"> */</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setCookies</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">if</span> (NetCenter.cookies.length() &gt; <span class="number">0</span>)</div><div class="line">    &#123;</div><div class="line">        CookieSyncManager.createInstance(AppApplication.getInstance());</div><div class="line">        CookieManager cookieManager = CookieManager.getInstance();</div><div class="line">        cookieManager.setAcceptCookie(<span class="keyword">true</span>);</div><div class="line">        <span class="keyword">if</span> (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP)</div><div class="line">        &#123;</div><div class="line">            cookieManager.setAcceptThirdPartyCookies(webView, <span class="keyword">true</span>);<span class="comment">//解决cookie更新失败的问题</span></div><div class="line">        &#125;</div><div class="line">        cookieManager.setCookie(NetCenter.PAGE_URL, NetCenter.cookies);</div><div class="line">        CookieSyncManager.getInstance().sync();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line"><span class="comment">/**</span></div><div class="line"> * 清空浏览器的cookies</div><div class="line"> */</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">clearCookies</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    CookieSyncManager cookieSyncMngr =</div><div class="line">            CookieSyncManager.createInstance(<span class="keyword">this</span>);</div><div class="line">    CookieManager cookieManager = CookieManager.getInstance();</div><div class="line">    cookieManager.removeSessionCookie();<span class="comment">// 移除</span></div><div class="line">    cookieManager.removeAllCookie();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h5 id="七、WebChromeClient文件上传处理"><a href="#七、WebChromeClient文件上传处理" class="headerlink" title="七、WebChromeClient文件上传处理"></a>七、WebChromeClient文件上传处理</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line">webView.setWebChromeClient(<span class="keyword">new</span> WebChromeClient()</div><div class="line">&#123;</div><div class="line">    <span class="comment">//扩展浏览器上传文件</span></div><div class="line">    <span class="comment">//3.0++版本</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">openFileChooser</span><span class="params">(ValueCallback&lt;Uri&gt; uploadMsg, String acceptType)</span></span></div><div class="line">    &#123;</div><div class="line">        </div><div class="line">        openPicForWebClient(uploadMsg);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">//3.0--版本</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">openFileChooser</span><span class="params">(ValueCallback&lt;Uri&gt; uploadMsg)</span></span></div><div class="line">    &#123;</div><div class="line">        </div><div class="line">        openPicForWebClient(uploadMsg);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">openFileChooser</span><span class="params">(ValueCallback&lt;Uri&gt; uploadMsg, String acceptType, String capture)</span></span></div><div class="line">    &#123;</div><div class="line">       </div><div class="line">        openPicForWebClient(uploadMsg);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">// For Android &gt; 5.0,移动端需要处理的核心</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onShowFileChooser</span><span class="params">(WebView webView, ValueCallback&lt;Uri[]&gt; uploadMsg, WebChromeClient.FileChooserParams fileChooserParams)</span></span></div><div class="line">    &#123;</div><div class="line">        openPicForWebClient(uploadMsg);</div><div class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>,上传核心代码<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Uri uri=...;</div><div class="line">mUploadMessage.onReceiveValue(uri);</div></pre></td></tr></table></figure></p>
<p>,在选择好图片或者文件后调用<code>ValueCallback&lt;Uri&gt; uploadMsg</code>的<code>onReceiveValue</code>传入文件的uri即可上传文件。</p>
]]></content>
    
    <summary type="html">
    
      &lt;h5 id=&quot;一、webview加载缓慢-如何提高加载使用效率&quot;&gt;&lt;a href=&quot;#一、webview加载缓慢-如何提高加载使用效率&quot; class=&quot;headerlink&quot; title=&quot;一、webview加载缓慢,如何提高加载使用效率?&quot;&gt;&lt;/a&gt;一、webview加载缓慢
    
    </summary>
    
      <category term="android" scheme="http://codewang.site/categories/android/"/>
    
    
      <category term="android" scheme="http://codewang.site/tags/android/"/>
    
      <category term="WebView" scheme="http://codewang.site/tags/WebView/"/>
    
  </entry>
  
  <entry>
    <title>更改android 4.4以上系统的状态栏和控制栏颜色</title>
    <link href="http://codewang.site/%E6%9B%B4%E6%94%B9android-4-4%E4%BB%A5%E4%B8%8A%E7%B3%BB%E7%BB%9F%E7%9A%84%E7%8A%B6%E6%80%81%E6%A0%8F%E5%92%8C%E6%8E%A7%E5%88%B6%E6%A0%8F%E9%A2%9C%E8%89%B2.html"/>
    <id>http://codewang.site/更改android-4-4以上系统的状态栏和控制栏颜色.html</id>
    <published>2017-07-03T09:17:44.000Z</published>
    <updated>2017-07-04T04:59:07.216Z</updated>
    
    <content type="html"><![CDATA[<div class="note primary"><p>心灵毒汤: 有时候不努力一把真的不知道什么叫绝望 </p>
</div>
<blockquote class="blockquote-center">这篇文章来介绍如何在java代码中更改系统状态栏和控制栏的颜色。</blockquote>



<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 设置顶部状态栏颜色（此功能仅19版本以上可用）</span></div><div class="line"><span class="keyword">if</span> (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.KITKAT) &#123;</div><div class="line">    Window window = getWindow();</div><div class="line">    window.addFlags(WindowManager.LayoutParams.FLAG_TRANSLUCENT_STATUS);</div><div class="line">    SystemBarTintManager tintManager = <span class="keyword">new</span> SystemBarTintManager(<span class="keyword">this</span>);</div><div class="line">    <span class="comment">// 激活状态栏设置</span></div><div class="line">    tintManager.setStatusBarTintEnabled(<span class="keyword">true</span>);</div><div class="line">    <span class="comment">// 使用颜色资源</span></div><div class="line">    tintManager.setStatusBarTintResource(R.color.button_pressed);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>上面代码的意思就是</p>
<ol>
<li><p>首先将状态栏的设置为透明，不透明，下面你设置的颜色是没有效果的。</p>
</li>
<li><p>然后再激活状态栏的设置。</p>
</li>
<li><p>给状态栏设置颜色</p>
</li>
</ol>
]]></content>
    
    <summary type="html">
    
      &lt;div class=&quot;note primary&quot;&gt;&lt;p&gt;心灵毒汤: 有时候不努力一把真的不知道什么叫绝望 &lt;/p&gt;
&lt;/div&gt;
&lt;blockquote class=&quot;blockquote-center&quot;&gt;这篇文章来介绍如何在java代码中更改系统状态栏和控制栏的颜色。&lt;/bl
    
    </summary>
    
      <category term="android" scheme="http://codewang.site/categories/android/"/>
    
    
      <category term="android" scheme="http://codewang.site/tags/android/"/>
    
      <category term="状态栏" scheme="http://codewang.site/tags/%E7%8A%B6%E6%80%81%E6%A0%8F/"/>
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="http://codewang.site/hello-world.html"/>
    <id>http://codewang.site/hello-world.html</id>
    <published>2017-07-03T05:37:33.512Z</published>
    <updated>2017-07-03T05:37:33.513Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo new <span class="string">"My New Post"</span></div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo server</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo generate</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo deploy</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.
    
    </summary>
    
    
  </entry>
  
</feed>
